task deploy << {
    def version = extractVersion();
    println "Version: $version"
}

def extractVersion() {
    def pom = new XmlSlurper().parse("pom.xml")
    def version = pom.version.text()

    if(!version.endsWith("-SNAPSHOT")) {
        throw new InvalidUserDataException("Only snapshots can be delivered")
    }

    version = version.substring(0, version.length() - 9)
}
